from transformers import pipeline
import requests
from bs4 import BeautifulSoup

# Load summarization model
summarizer = pipeline("summarization", model="facebook/bart-large-cnn")

def fetch_article_text(url):
    response = requests.get(url)
    soup = BeautifulSoup(response.content, 'html.parser')
    paragraphs = soup.find_all('p')
    return ' '.join([p.get_text() for p in paragraphs])

def summarize_text(text, max_length=150, min_length=50):
    summary = summarizer(text, max_length=max_length, min_length=min_length, do_sample=False)
    return summary[0]['summary_text']

def main():
    print("=== AI Article Summarizer ===")
    choice = input("Enter 1 for URL input, 2 for raw text: ")

    if choice == "1":
        url = input("Paste the article URL: ")
        text = fetch_article_text(url)
    elif choice == "2":
        print("Paste your text below. End input with a blank line:")
        lines = []
        while True:
            line = input()
            if line.strip() == "":
                break
            lines.append(line)
        text = " ".join(lines)
    else:
        print("Invalid input")
        return

    print("\nGenerating summary...\n")
    summary = summarize_text(text)
    print("=== Summary ===")
    print(summary)

if __name__ == "__main__":
    main()
